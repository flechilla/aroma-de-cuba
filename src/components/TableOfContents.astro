---
import { useTranslations } from '../i18n/utils';

interface Props {
  headings: Array<{ depth: number; slug: string; text: string }>;
  lang: 'es' | 'en';
}

const { headings, lang } = Astro.props;
const t = useTranslations(lang);

// Only show h2 and h3 headings
const toc = headings.filter((h) => h.depth >= 2 && h.depth <= 3);
---

{toc.length > 3 && (
  <nav class="bg-arena/50 rounded-lg p-6 mb-10" aria-label={t('post.toc')}>
    <h2 class="font-heading text-base font-semibold text-tabaco mb-4">{t('post.toc')}</h2>
    <ol class="list-none space-y-2">
      {toc.map((heading) => (
        <li class={heading.depth === 3 ? 'ml-4' : ''}>
          <a
            href={`#${heading.slug}`}
            class="text-sm text-piedra-oscura no-underline hover:text-coral transition-colors"
          >
            {heading.text}
          </a>
        </li>
      ))}
    </ol>
  </nav>
)}
